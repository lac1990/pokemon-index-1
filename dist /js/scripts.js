let pokemonRepository=function(){let e=[];function t(){return e}function n(t){e.push(t)}let i=document.querySelector(".modal");function l(){i.classList.remove("is-visible")}return window.addEventListener("keydown",e=>{"Escape"===e.key&&i.classList.contains("is-visible")&&l()}),i.addEventListener("click",e=>{e.target===i&&l()}),{getAll:t,add:n,addListItem:function e(t){let n=document.querySelector(".pokemon-list"),i=document.createElement("li"),l=document.createElement("button");i.classList.add("list-group-item"),l.innerText=t.name,l.classList.add("btn","btn-primary","btn-lg"),l.setAttribute("data-toggle","modal"),l.setAttribute("data-target","#modal-container"),i.appendChild(l),n.appendChild(i),l.addEventListener("click",function(e){(function e(t){pokemonRepository.loadDetails(t).then(function(){(function e(t){let n=document.querySelector(".modal-body"),i=document.querySelector(".modal-header");n.innerHTML="";let l=document.querySelector(".modal-title");var a=t.name.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");l.innerHTML=a;let o=document.querySelector(".close"),r=document.createElement("img");r.classList.add("modal-img"),r.src=t.imageUrlFront,r.alt="Front image of "+t.name;let s=document.createElement("img");s.classList.add("modal-img"),s.src=t.imageUrlBack,s.alt="Back image of "+t.name;let c=document.createElement("p"),d=[t.types[0].type.name];for(let p=1;p<t.types.length;p++)d.push(", "+t.types[p].type.name);c.innerHTML="Types: "+d.join("");let m=document.createElement("p");m.innerHTML="Height: "+t.height;let u=document.createElement("p");u.innerHTML="Weigth: "+t.weight;let h=document.createElement("p"),f=[t.abilities[0].ability.name];for(let y=1;y<t.abilities.length;y++)f.push(", "+t.abilities[y].ability.name);h.innerHTML="Abilities: "+f.join(""),i.appendChild(l),i.appendChild(o),n.appendChild(r),n.appendChild(s),n.appendChild(c),n.appendChild(m),n.appendChild(u),n.appendChild(h)})(t)})})(t)})},loadList:function e(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){var e={name:e.name,detailsUrl:e.url};n(e)})}).catch(function(e){console.error(e)})},loadDetails:function e(t){return fetch(t.detailsUrl).then(function(e){return e.json()}).then(function(e){t.imageUrlFront=e.sprites.front_default,t.imageUrlBack=e.sprites.back_default,t.types=e.types,t.height=e.height,t.weight=e.weight,t.abilities=e.abilities}).catch(function(e){console.error(e)})}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})}),document.getElementById("mySearch").addEventListener("input",function(e){let t=e.target.value.toLowerCase(),n=document.querySelectorAll(".pokemon-list li");n.forEach(function(e){let n=e.textContent.toLowerCase();n.includes(t)?e.style.display="list-item":e.style.display="none"})});
